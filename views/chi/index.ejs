<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head',{pageCategory:page_category},{pageTitle:page_title}) %>
    
</head>

<body>
    <header>
        <%- include('../partials/navbar') %>
    </header>
<!-- user's tamogotchi & all relevant headings to that tamagotchi -->
<script>
//     let userId = null
//     const createUserId = () => {
//         console.log("USERID",userId)
//         if(!userId){
//             userId = Math.floor((Math.random() * 100000) + 1);
//             console.log("NEW USER - userId :" + userId )
//             return userId
//         }
//         else{
//             console.log("userId exists:" + userId )
//             return userId
//         }
//     }

    
//     console.log("reached createNewLeadNewMotivation function")
//     createUserId()
//     console.log("PRE IDENTIFY POST CREATEUSERID userId : ",userId)
//     analytics.identify(userId,{"Lead Account"},{traits})
    
//     </script>

<section>
    <h1 class="center">Your minifi account</h1> 
    <h6 class="center">Your data is your Chi's data</h6>
    <br/><br/>
    <input type="text" name="username" id="inputUsername" placeholder="username"/><button onclick="idUser()">SAVE</button>

     <form name="mi_chi" id="accountForm" >
        <h3>Create your account by filling in your data & by designing chi</h3>
        <p class="italic">If you can name it you can claim it!</p>
        <br/><br/>
        <div>
            <h4>Let’s take the overwhelming topics of keeping good health, habits, ideas and make them bite size tasks.</h4>
            <div>
                <input name="fullname" id="fullname" size="50%" type="text" placeholder=" mi full name"/> 
                <input name="email" id="email"    size="50%" type="email" placeholder=" email"/> 
                <input name="username" id="username"  size="50%" type="text" placeholder=" mi username"/> <br/><br/>
                <input name="phone_number" id="phone_number"  size="50%" type="text" placeholder=" phone number"/> 
                <label>Birthday </label> <input name="age" id="age"  size="50%" type="date" /> 
            </div>
            <br/><br/>

            <h4>By taking care of your tamagotchi based on your daily activity and life choices you’ll be able to take on more of a growth mindset towards achieving one goal, one habit at a time. </h4>
            <div>
                <input name="chi_name" id="chi_name"  size="50%" type="text" placeholder=" chi name"/> 
                <label>Design mi chi </label> <input name="chi_color" id="chi_color"  size="50%" type="color" placeholder=" design chi"/> 
            </div>
        </div>
        <br><br><br> 
        <div>
                <h4>Mindfulness is a huge part of minifi. We often find ourselves doing one task while preoccupying ourselves with the next. Being present, THERE, actually IN the task at hand will allow our full attention, mental faculties, and body to rest. </h4>
                <textarea cols="81" name="details" id="details"  rows="10" placeholder="Describe why you are now starting your journey towards integrating holistic mindfulness into your daily routine..."></textarea> 
            </div>

            <div>
                <h4>Focusing on one link at a time will create a stronger chain towards our own success.</h4>
                <div >
      
                    
                    <div id="newGrooves" class="">
                    <input type="checkbox" name="healthierEating" id="healthierEating"> Healthier Eating 
                    <input type="checkbox" name="healthierThinking" id="healthierThinking"> Healthier Thinking 
                    <input type="checkbox" name="healthierActivities" id="healthierActivities"> Healthier Activities 
                    <input type="checkbox" name="healthierSocializing" id="healthierSocializing"> Healthier Socializing 
                    <input type="checkbox" name="healthierBreaks" id="healthierBreaks"> Healthier Breaks 
                    <input type="checkbox" name="healthierSleep" id="healthierSleep"> Healthier Sleep 
                    </div>
                </div>
            </div>
        </div>
        <br><br>
        
        <button id="submitAccountForm">Submit</button>
    </form> 
</section>
<script>  
     
    
    // <input name="submit" type="submit" value="submit" id="submitAccountForm"/>
    //    const createAccount = (e) =>{
    //        console.log(`EEEEEEE : `,e.target)
    //    }

    // console.log($submitAccountform);



    const createAccount = (e) =>{
        console.log(`EEEEEEE : `,e.target)
        e.preventDefault();
        console.log("CREATING...")
        let form = e.target;
    

        // let newGrooves = {} 
        // const all_grooves = {
        //     healthierEating : form[healthierEating].value,
        //     healthierThinking : form[healthierThinking].value,
        //     healthierActivities : form[healthierActivities].value,
        //     healthierSocializing : form[healthierSocializing].value,
        //     healthierBreaks : form[healthierBreaks].value,
        //     healthierSleep : form[healthierSleep].value,
        // }
        // for(let groove in all_grooves){
        //     if(groove){
        //         newGrooves.push[groove]
        //     }
        // }
        // console.log(newGrooves)


        let fullname = document.getElementById("fullname").value || "test fullname";
        let email = document.getElementById("email").value || "test email";
        let age = document.getElementById("age").value || "test age";
        let chi_name = document.getElementById("chi_name").value || "test chi_name";
        let chi_color = document.getElementById("chi_color").value || "test chi_color";
        let chi_age = Date.now();
         // new_grooves = newGrooves
        let details = document.getElementById("details").value || "test details";
        let username = document.getElementById("username").value || "test username";
        let phone_number = document.getElementById("phone_number").value || "test phone_number";

        
        // GET FULL FORM DATA IN CONSOLE 
        console.log( "fullname: "+ fullname + ", email: "+ email + ", age: "+ age + ", chi_name: "+ chi_name + ", chi_color: "+ chi_color + " details :"+ details + ", username: "+ username + ", phone_number: "+ phone_number + ", chi_age: "+ chi_age )
    
        //console.log(event.toLocaleDateString(undefined, options));
    
        let properties = {
            name: fullname, 
            email: email, 
            username: username,
            phone_number: phone_number,
            details: details,
            age: age,
            chi_name : chi_name,
            chi_color : chi_color,
            chi_age: chi_age,
            // new_grooves: new_grooves
        };

        if (window.ready()) { console.log(`window.uTC = `,window.uTC())}

        // let context = {

        // }

        console.log(properties)

        analytics.identify({
            email: email, 
            name: fullname,
            username: username,
            phone_number: phone_number,
        });

        analytics.track('Mi Chi Account Created', properties, 
        {integrations: 
            {
           //     "All": true,
           //     "Amplitude": {
           //         session_id: currentSessionId
           //     }
            }}, 
            function() {
                window.location.href = "";
            }
        );
        redirect="/";
       }


    </script>

    
</body>
<footer>
    <%- include('../partials/footer') %>
</footer>



</html>